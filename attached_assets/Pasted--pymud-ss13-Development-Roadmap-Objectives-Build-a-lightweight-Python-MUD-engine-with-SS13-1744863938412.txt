# pymudâ€‘ss13 Development Roadmap

## ğŸ¯ Objectives
- Build a lightweight Python MUD engine with SS13â€‘inspired mechanics  
- Support dynamic inâ€‘game scripting (LambdaMOOâ€‘style verbs)  
- Implement a componentâ€‘based object model  
- Provide an eventâ€‘driven â€œsystemsâ€ architecture (atmospherics, power, jobs, AI)  
- Expose a WebSocketâ€‘based web client with grid/map UI  

---

## ğŸ›  Phases & Tasks

### PhaseÂ 1 â€“ Foundation Refactoring
- [ ] **Command Registry**  
  - Refactor `mudpy_interface.py` â†’ `engine.py`  
  - Replace `if/elif` chains with `@register(cmd)` handlers  
- [ ] **World Layer**  
  - Extract YAML loader & object store into `world.py`  
  - Centralize save/load logic in `persistence.py`  
- [ ] **Event Bus**  
  - Create `events.py` with `subscribe(event, fn)` & `publish(event, **ctx)`  
  - Wire core Mudpy loops into the bus  

### PhaseÂ 2 â€“ Component System
- [ ] **GameObjectÂ Class**  
  - Add `components: dict[str, Component]` field  
  - Helper methods: `add_component()`, `get_component()`  
- [ ] **Core Components**  
  - Door (open/close/lock)  
  - AccessControl (keycards, access levels)  
  - Container (inventory, nested contents)  
- [ ] **YAML â†’ Components**  
  - Load `data/objects.yaml` specs â†’ instantiate components  

### PhaseÂ 3 â€“ Eventâ€‘Driven Systems
- [ ] **Atmospherics** (`systems/atmos.py`)  
  - Zones, gas mixtures, vents, leak detection  
  - Publish/subscribe hooks for pressure changes  
- [ ] **Power Grid** (`systems/power.py`)  
  - Breakers, grid nodes, power on/off events  
  - Autoâ€‘lock doors on power loss  
- [ ] **Jobs & AI** (`systems/jobs.py`, `systems/ai.py`)  
  - Crew roles, loadouts, basic NPC behavior loops  

### PhaseÂ 4 â€“ Dynamic Inâ€‘Game Scripting
- [ ] **Sandbox Engine**  
  - Integrate RestrictedPython (or Lua via `lupa`)  
  - `script_manager.py` for compile/exec of user code  
- [ ] **Inâ€‘World Verb API**  
  - `@register("addverb")` command  
  - Allow players/admins to attach `command_<verb>` scripts to objects  
- [ ] **Persistence of Scripts**  
  - Extend save/load to include attached code snippets  

### PhaseÂ 5 â€“ Persistence Enhancements
- [ ] **State Serialization**  
  - Dump all `GameObject` fields + component state to YAML/JSON  
- [ ] **Snapshotting**  
  - Periodic autosave (e.g. every 5Â min)  
  - Graceful shutdown save hook  

### PhaseÂ 6 â€“ Web Client & UI
- [ ] **Command I/O Panel**  
  - Hook up via WebSocket to `run.py` server  
- [ ] **Gridâ€‘Map Renderer**  
  - CSS Grid or `<canvas>` for station layout  
  - Clickable cells show room/object info  
- [ ] **Status Overlays**  
  - Airlock locks, atmospheric alerts, power status badges  

### PhaseÂ 7 â€“ Testing & Documentation
- [ ] **Unit Tests**  
  - Engine, world, events, components, scripting  
- [ ] **CI/CD Pipeline**  
  - GitHub Actions: lint, test, build  
- [ ] **Docs & Examples**  
  - README with quickstart  
  - `docs/` folder: architecture, YAML spec examples  

---

## ğŸš€ Future Extensions
- **Plugin Architecture** (hotâ€‘loadable bundles)  
- **Medical & Research Systems** (SS13 modules)  
- **Desktop/Mobile Client** (Electron or React Native)  
- **Multiâ€‘Server Clustering** for large worlds  

---

> _Keep this roadmap in `docs/roadmap.md` in your repo. Update statuses as you knock off each task and extend with new ideas!_  